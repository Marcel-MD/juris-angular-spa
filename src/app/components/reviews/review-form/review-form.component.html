<mat-card>
  <mat-card-title>Write Review</mat-card-title>
  <mat-card-content>
    <form [formGroup]="review" class="example-form">
      <mat-form-field appearance="fill" class="small-width">
        <mat-label>First name</mat-label>
        <input formControlName="firstName" matInput required />
        <mat-error *ngIf="review.get('firstName')?.invalid">{{
          getErrorMessage("firstName")
        }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="small-width">
        <mat-label>Last Name</mat-label>
        <input formControlName="lastName" matInput required />
        <mat-error *ngIf="review.get('lastName')?.invalid">{{
          getErrorMessage("lastName")
        }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="small-width">
        <mat-label>Email</mat-label>
        <input formControlName="email" matInput required />
        <mat-error *ngIf="review.get('email')?.invalid">{{
          getErrorMessage("email")
        }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="small-width">
        <mat-label>Phone Number</mat-label>
        <input formControlName="phoneNumber" matInput required />
        <mat-error *ngIf="review.get('phoneNumber')?.invalid">{{
          getErrorMessage("phoneNumber")
        }}</mat-error>
      </mat-form-field>

      <label
        >Rating: <strong>{{ review.get("rating")?.value }}</strong></label
      >
      <mat-slider
        class="full-width"
        color="primary"
        thumbLabel
        step="1"
        min="1"
        max="10"
        tickInterval="1"
        formControlName="rating"
      ></mat-slider>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Review</mat-label>
        <textarea
          rows="3"
          formControlName="description"
          matInput
          required
        ></textarea>
        <mat-error *ngIf="review.get('description')?.invalid">{{
          getErrorMessage("description")
        }}</mat-error>
      </mat-form-field>

      <button
        (click)="createReview()"
        *ngIf="formState == 'active'"
        [disabled]="!review.valid"
        color="primary"
        mat-raised-button
      >
        Send Review
      </button>
      <button *ngIf="formState == 'loading'" mat-button>Loading...</button>
      <button *ngIf="formState == 'success'" color="primary" mat-button>
        Thanks for your feedback!
      </button>
    </form>
  </mat-card-content>
</mat-card>
